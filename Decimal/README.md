# Decimal Library

## Описание проекта

Decimal Library - это реализация библиотеки для работы с десятичными числами с фиксированной точкой. Проект предоставляет полный набор функций для арифметических операций, сравнений и преобразований с десятичными числами, аналогичный типу `decimal` в C#.

### Основные возможности

- **Арифметические операции**:
  - Сложение (`s21_add`)
  - Вычитание (`s21_sub`)
  - Умножение (`s21_mul`)
  - Деление (`s21_div`)
- **Операции сравнения**:
  - Равно (`s21_is_equal`)
  - Не равно (`s21_is_not_equal`)
  - Больше (`s21_is_greater`)
  - Больше или равно (`s21_is_greater_or_equal`)
  - Меньше (`s21_is_less`)
  - Меньше или равно (`s21_is_less_or_equal`)
- **Математические функции**:
  - Округление (`s21_round`)
  - Округление вниз (`s21_floor`)
  - Усечение (`s21_truncate`)
  - Смена знака (`s21_negate`)
- **Преобразования**:
  - Из `int` в `decimal`
  - Из `float` в `decimal`
  - Из `decimal` в `int`
  - Из `decimal` в `float`

## Системные требования

**Важно**: Проект предназначен для работы на POSIX-совместимых системах (Linux, macOS).

### Зависимости

- gcc (компилятор C)
- make (система сборки)
- check (фреймворк для тестирования)
- clang-format (для проверки стиля кода, опционально)
- cppcheck (для статического анализа, опционально)

## Структура проекта

```
Decimal/
├── s21_decimal.h              # Основной заголовочный файл
├── s21_*.c                    # Основные функции библиотеки
│   ├── s21_add.c             # Сложение
│   ├── s21_sub.c             # Вычитание
│   ├── s21_mul.c             # Умножение
│   ├── s21_div.c             # Деление
│   ├── s21_is_*.c            # Функции сравнения
│   ├── s21_from_*.c          # Функции преобразования
│   ├── s21_round.c           # Округление
│   ├── s21_floor.c           # Округление вниз
│   ├── s21_truncate.c        # Усечение
│   └── s21_negate.c          # Смена знака
├── _*.c                       # Вспомогательные функции
│   ├── _add_alt.c            # Альтернативная реализация сложения
│   ├── _sub_alt.c            # Альтернативная реализация вычитания
│   ├── _mul_alt.c            # Альтернативная реализация умножения
│   ├── _div_alt.c            # Альтернативная реализация деления
│   ├── _convert_alt.c        # Конвертация между форматами
│   ├── _rescale.c            # Масштабирование
│   ├── _bank_rounding.c      # Банковское округление
│   └── _utility_functions.c  # Утилитарные функции
├── TEST.c                     # Тесты библиотеки
├── Makefile                   # Система сборки
└── README.md                  # Документация
```

## Установка и сборка

### 1. Сборка библиотеки
```bash
make
```

### 2. Создание статической библиотеки
```bash
make s21_decimal.a
```

### 3. Запуск тестов
```bash
make test
```

### 4. Генерация отчета покрытия кода
```bash
make gcov_report
```

## Использование

### Подключение библиотеки
```c
#include "s21_decimal.h"
```

### Примеры использования

#### Арифметические операции
```c
s21_decimal a, b, result;
s21_from_int_to_decimal(10, &a);
s21_from_int_to_decimal(5, &b);

// Сложение
s21_add(a, b, &result);

// Вычитание
s21_sub(a, b, &result);

// Умножение
s21_mul(a, b, &result);

// Деление
s21_div(a, b, &result);
```

#### Операции сравнения
```c
s21_decimal a, b;
s21_from_int_to_decimal(10, &a);
s21_from_int_to_decimal(5, &b);

// Сравнения
int is_equal = s21_is_equal(a, b);
int is_greater = s21_is_greater(a, b);
int is_less = s21_is_less(a, b);
```

#### Математические функции
```c
s21_decimal value, result;
s21_from_float_to_decimal(3.7, &value);

// Округление
s21_round(value, &result);

// Округление вниз
s21_floor(value, &result);

// Усечение
s21_truncate(value, &result);

// Смена знака
s21_negate(value, &result);
```

#### Преобразования
```c
s21_decimal dec;
int int_val;
float float_val;

// Из int в decimal
s21_from_int_to_decimal(42, &dec);

// Из float в decimal
s21_from_float_to_decimal(3.14, &dec);

// Из decimal в int
s21_from_decimal_to_int(dec, &int_val);

// Из decimal в float
s21_from_decimal_to_float(dec, &float_val);
```

## Тестирование

### Запуск всех тестов
```bash
make test
```

### Проверка стиля кода
```bash
make style
```

### Статический анализ кода
```bash
make cpp
```

### Очистка файлов сборки
```bash
make clean
```

## Структура данных

### s21_decimal
```c
typedef struct {
  unsigned int bits[4];  // 128 бит для хранения числа
} s21_decimal;
```

### s21_decimal_alt
```c
typedef struct {
  bool bits[192];        // Альтернативное представление
  bool sign;             // Знак числа
  int exp;               // Экспонента
} s21_decimal_alt;
```

## Коды возврата

### operation_result
- `OPERATION_OK = 0` - операция выполнена успешно
- `NUMBER_TOO_BIG = 1` - число слишком большое
- `NUMBER_TOO_SMALL = 2` - число слишком маленькое
- `DIVISION_BY_ZERO = 3` - деление на ноль

### conversion_result
- `CONVERSION_OK = 0` - преобразование успешно
- `CONVERSION_ERROR = 1` - ошибка преобразования

## Особенности реализации

- **Точность**: Поддержка до 28 знаков после запятой
- **Диапазон**: От -79,228,162,514,264,337,593,543,950,335 до 79,228,162,514,264,337,593,543,950,335
- **Банковское округление**: Используется для точных финансовых вычислений
- **Альтернативное представление**: Внутреннее представление для упрощения вычислений

## Лицензия

Этот проект распространяется под лицензией GNU General Public License v3.0 (GPLv3).

Проект разработан в рамках учебной программы Школы21.
